"0","# Preprocessing"
"0","dt <- melt(dt[!is.na(COUNT)], "
"0","           id.vars = c(""YEAR"", ""SEX"", ""AGEGRP""), "
"0","           measure.vars = patterns(""COUNT_""),"
"0","           variable.name = ""CAUSE"", value.name = ""COUNT"")"
"0",""
"0","dt[is.na(COUNT), COUNT := 0]"
"0","dt[, CAUSE := str_remove(CAUSE, ""COUNT_"")]"
"0","dt[, CAUSE := str_to_title(CAUSE)]"
"0",""
"0","dt <- merge(dt, dt.pop, by = c(""YEAR"", ""SEX"", ""AGEGRP""), all.x = TRUE)"
"0",""
"0","age.groups <- c(""0-4"", ""5-9"", ""10-14"", ""15-19"", "
"0","                ""20-24"", ""25-29"", ""30-34"", ""35-39"","
"0","                ""40-44"", ""45-49"", ""50-54"", ""55-59"", ""60-64"","
"0","                ""65-69"", ""70-74"", ""75-79"", ""80-84"", ""85 +"")"
"0",""
"0","dt[, AGEGRP := factor(AGEGRP, levels = age.groups)]"
"0","setkey(dt, YEAR, SEX, AGEGRP)"
